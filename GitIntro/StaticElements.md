# Git 內部結構筆記 (靜態元素)

這份文件將拆解 Git 在您**本機**上的「靜態元素」。我們將使用「倉庫」的比喻來理解這些零件。

### 切角一：Git 的靜態元素（不含時間與功能）

我們來盤點一下 Git 世界中所有的「名詞」和「元素」。

#### 1. 儲存庫 (Repository)

- **比喻：** 整個「倉庫園區」。
    
- **描述：** 這是最大的外框。它包含了您的「工作目錄」（您看到的檔案）和 `.git` 資料夾（倉庫的管理中心與儲存區）。
    
- **類型：**
    
    - **本機儲存庫 (Local Repo)：** 您電腦上的，有 `.git` 也有「工作目錄」。
        
    - **遠端裸儲存庫 (Remote Bare Repo)：** GitHub 上的，**只有** `.git` 的內容，沒有「工作目錄」。
        

#### 2. .git 資料夾

- **比喻：** 倉庫的「管理與倉儲中心」。
    
- **描述：** 這是儲存庫的核心。它包含了以下所有元素。
    

#### 3. 物件資料庫 (Object Database)

- **比喻：** 倉庫的「儲藏區」（位於 `.git/objects`）。
    
- **描述：** 存放所有「貨物」的地方。所有貨物都用其內容的「雜湊值」當作 ID。
    
- **主要貨物類型：**
    
    - **Blob (檔案內容)：** 最小的貨物。它**只**儲存您檔案的**內容**，不包含檔名或路徑。（例如：「一箱蘋果」）。
        
    - **Tree (目錄快照)：** 貨物「清單」。它定義了一個資料夾的結構。
        
        - **內容就像：**
            
            - `App.js` 檔案的內容是 Blob `9a3b...`
                
            - `css/` 資料夾的清單是 Tree `5c8f...`
                
    - **Commit (提交快照)：** 「棧板」。它將所有東西串起來。
        
        - **內容如上所述：**「這張棧板用的是 `Tree f4c1e2...` 這張清單，而它前一張棧板是 `parent abc123...`」。
            

#### 4. 參考 (References / Refs)

- **比喻：** 倉庫「管理辦公室」裡的「指標看板」（大部分在 `.git/refs`）。
    
- **描述：** 這些是輕量級的「指標」，指向特定的 `Commit` 物件。
    
- **主要指標類型：**
    
    - **分支 (Branches)：** （例如 `.git/refs/heads/main`）。可移動的「白板」，指向「最新」的進度。
        
    - **標籤 (Tags)：** （例如 `.git/refs/tags/v1.0`）。固定不動的「奇異筆標籤」，錨定在某個重要歷史點。
        
    - **HEAD (當前位置)：** （`.git/HEAD` 檔案）。「您/倉管員」的指標，決定您**目前正在看哪一塊白板**（哪個分支）。
        

#### 5. 暫存區 (Staging Area / Index)

- **比喻：** 倉庫的「出貨暫存平台」。
    
- **描述：** 這是一個**單一檔案**（位於 `.git/index`）。它是一個「清單」，精確記錄了您**「下一次」**`commit` 準備要打包的內容。
    
- **位置：** 它位於「工作目錄」和「物件資料庫」之間，扮演緩衝區的角色。
    

#### 6. 工作目錄 (Working Directory)

- **比喻：** 倉庫外的「工作平台」或「工廠」。
    
- **描述：** 這是您實際看到和編輯檔案的地方（例如 `App.js`, `README.md`）。這些檔案**不**在 `.git` 資料夾內，而是與它「同層」。
    

#### 靜態總結

|元素|比喻|實際位置 (本機)|作用|
|---|---|---|---|
|**工作目錄**|工廠|專案資料夾 (非 .git)|讓您實際編輯檔案|
|**暫存區**|出貨暫存平台|`.git/index` 檔案|準備「下一次」要提交的清單|
|**物件 (Blob, Tree, Commit)**|貨物、清單、棧板|`.git/objects` 資料夾|儲存所有歷史資料 (永久不變)|
|**參考 (Branch, Tag)**|白板、標籤|`.git/refs` 資料夾|用人類可讀的名稱指向特定 Commit|
|**HEAD**|倉管員/您的位置|`.git/HEAD` 檔案|指向您「目前所在」的那個分支|

### 專案資料夾結構範例

這顯示了「工作目錄」和「.git 資料夾」的相對位置。

```
/SuSuGiGi/ (您的專案根目錄，這就是「儲存庫」)
|
├── .git/ (Git 的管理中心，通常是隱藏的)
│   |
│   ├── HEAD         (檔案) -> 關鍵指標！指向您「目前」在哪個分支。
│   ├── config       (檔案) -> 儲存庫的設定檔 (例如遠端 origin 的網址)。
│   ├── index        (檔案) -> 「暫存區」(Staging Area) 本人。
│   │
│   ├── refs/        (資料夾) -> 存放「參考 (Refs)」的地方 (書籤/看板)
│   │   ├── heads/   (資料夾) -> 存放「分支 (Branches)」指標 (可移動的白板)
│   │   │   └── main   (檔案) -> 內容是 "f4c1e2..." (一個 Commit ID)
│   │   └── tags/    (資料夾) -> 存放「標籤 (Tags)」指標 (固定的標籤)
│   │       └── v1.0   (檔案) -> 內容是 "abc123..." (一個 Commit ID)
│   │
│   └── objects/     (資料夾) -> 核心！「物件資料庫」(所有貨物)
│       |
│       ├── f4/        (資料夾) -> 範例：存放 "f4c1e2..." 物件
│       │   └── c1e2...  (檔案) -> 一個「鬆散物件」(Loose Object)
│       ├── ab/
│       │   └── c123...  (檔案) ->  ...

```