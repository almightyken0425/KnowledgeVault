# Cryptography Basics 密碼學基礎

去中心化帳本的安全性並不依賴於銀行的金庫，而是建立在兩個堅實的密碼學基石之上。一是用於確保身份與授權的數位簽章，二是用於確保資料完整性的雜湊函數。

---

## Hash Functions 雜湊函數

在分散式系統中，我們需要一種機制來確保資料在傳輸或儲存過程中，沒有被更改任何一個位元。這就是雜湊函數的主要功能，其中最著名的是比特幣使用的 SHA-256 演算法。

### 核心特性

- **固定長度:** 無論輸入資料的長短，輸出總是固定為 256 位元的雜湊值 Summary。
- **單向性:** 你可以輕易地計算出資料的雜湊值，但無法反向推導出原始資料。
- **抗碰撞性:** 要找到兩個產生相同雜湊值的不同輸入，其機率低到天文數字等級，實際上被認為是不可能的。

### 雪崩效應 The Avalanche Effect

雜湊函數最強大的特性在於，輸入資料的微小變動，會導致輸出結果產生劇烈的且不可預測的改變。

#### 實測範例

- **輸入 A:** `Hello World`
- **輸出 A:** `a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e`

- **輸入 B:** `hello world` 僅將 H 改為 h
- **輸出 B:** `e4ad0102dc2523443333d808b91a9857c543465d6639b45ec44f2bb804390531`

可以看到，僅僅改變一個位元，輸出的 256 個位元中平均有 50% 會翻轉。這使得攻擊者無法透過分析輸出的變化來推導輸入的內容。

---

## Digital Signatures 數位簽章

帳本記錄了交易，但我們如何確保寫上這筆交易的人真的是帳戶擁有者。在實體世界我們用手寫簽名，而在數位世界我們使用非對稱加密技術。

### 鑰匙對 Key Pairs

每個使用者都擁有一對數學上相關聯的鑰匙。

#### 私鑰 Private Key
- **用途:** 用於簽署。
- **保管:** 必須絕對保密，只有擁有者知道。
- **功能:** 擁有者使用私鑰對交易訊息進行運算，產生一串稱為數位簽章的亂碼。這代表了擁有者的授權。

#### 公鑰 Public Key
- **用途:** 用於驗證。
- **保管:** 對全世界公開。
- **功能:** 網路上的任何人都可以使用公鑰來驗算簽章。如果驗算通過，證明該簽章確實是由對應的私鑰所產生，且訊息內容未被篡改。

### 運作邏輯

- **發起:** Alice 寫下一筆轉帳給 Bob 的交易訊息。
- **簽署:** Alice 使用她的私鑰對這條訊息進行加密運算，生成數位簽章。
- **驗證:** 礦工與網路節點收到訊息後，使用 Alice 的公鑰進行數學驗證。
   - **若成功:** 證明只有 Alice 能發出這筆交易，且內容完整。
   - **若失敗:** 交易無效，直接丟棄。

這種機制確保了不可否認性 Non-repudiation，即發送者無法抵賴這筆交易是由他發起的。
