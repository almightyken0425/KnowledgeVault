# Data Structures 資料結構

區塊鏈的本質是一個不斷增長的資料庫，其核心設計採用了獨特的資料結構來確保資料的不可篡改性與驗證效率。

---

## Block Header 區塊頭

這是區塊鏈最精華的設計，大小通常很小，例如比特幣中僅佔約 80 Bytes。它扮演著區塊身分證的角色，也是礦工進行工作量證明運算的對象。區塊頭包含六個關鍵欄位：

- **Version:** 軟體版本號，用於追蹤協議升級。
- **Previous Block Hash:** 前一個區塊的雜湊值。這是將區塊串連成鏈的關鍵數位膠水。
- **Merkle Root:** 區塊體中所有交易的濃縮指紋。
- **Timestamp:** 區塊產生的時間戳記。
- **Difficulty Target:** 網路當前的挖礦難度目標值。
- **Nonce:** 礦工為了滿足工作量證明要求而不斷嘗試改變的隨機數。

## Block Body 區塊體

這是實際存放資料的地方，其大小不定，例如比特幣區塊上限約為 1MB 到 4MB。這裡包含了該區塊所確認的所有交易列表。

### Merkle Tree 默克爾樹

為了將成千上萬筆交易高效地塞入區塊頭的一個欄位中，區塊鏈使用了默克爾樹這種二元樹結構。

- **運作:** 將所有交易兩兩進行雜湊運算，層層向上匯聚，最後產生一個唯一的根雜湊值，即 Merkle Root。
- **壓縮:** 無論區塊內有多少筆交易，區塊頭只需要紀錄這一個 32 Bytes 的 Root。
- **輕量驗證:** 這允許手機錢包等輕節點在不下載完整區塊鏈的情況下，透過 Merkle Path 快速驗證某筆交易是否真實存在於區塊中。

---

## The Chain 鏈式結構

區塊鏈本質上是一個單向的鏈結串列 Linked List。

- **結構:** 每個區塊都透過 Previous Block Hash 欄位明確指向上一個區塊。
- **效應:** 這種結構形成了一種強大的連鎖反應。如果你試圖篡改第 100 個區塊中的任何一筆交易，該區塊的 Merkle Root 會改變，進而導致該區塊的 Hash 改變。由於第 101 個區塊紀錄了第 100 個區塊的 Hash，這會導致第 101 個區塊的連結失效。這意味著要篡改歷史，攻擊者必須重算並覆寫該區塊之後的所有區塊，這在計算力上是極其困難的。
