# Definition 定義

區塊鏈不僅僅是一種技術，更是一種重新定義信任的社會實驗。本質上它是一個公開且去中心化的分散式帳本，由多個核心元素共同維持運作。為了更精確地理解，我們將其區分為「實際存在的資料物件」與「抽象運作的系統概念」。

---

## Data Objects 資料物件

這些是實際以位元組形式儲存於電腦硬碟中的資料結構。

- **Block 區塊:**
    - **定義:** 帳本中的某一頁，儲存交易的容器。
    - **資料結構:**
        - `Version`: 軟體版本號。
        - `Previous Block Hash`: 連結上一個區塊的數位指紋。
        - `Merkle Root`: 區塊內所有交易的濃縮指紋。
        - `Timestamp`: 區塊產生的時間戳記。
        - `Difficulty Target`: 挖礦難度目標值。
        - `Nonce`: 用於工作量證明的隨機數。
        - `Body`: 交易列表，包含該區塊確認的所有 Transactions。

- **Transaction 交易:**
    - **定義:** 價值轉移的基本單位。
    - **資料結構:**
        - `Input`: 資金來源的參考 Hash。
        - `Output`: 收款人地址與金額。
        - `Amount`: 轉移的數量。
        - `Fee`: 給礦工的手續費。
        - `Signature`: 發送者的數位簽章。

- **Address 地址:**
    - **定義:** 網路參與者的身份標識。
    - **資料結構:** 源自於公鑰，是一個公開的亂碼字串，類似於銀行帳號。

---

## System Concepts 系統概念

這些不是單一的資料檔案，而是描述系統運作方式或角色的抽象概念。

- **Chain 鏈:**
    - **定義:** 這不是一個物理物件，而是一種邏輯結構。透過區塊中的 `Previous Block Hash` 欄位，將分散的區塊依照時間順序數學性地串連起來，形成一個不可篡改的序列。

- **Node 節點:**
    - **定義:** 指運行區塊鏈軟體的電腦伺服器。它們是網路的實體組成部分，負責儲存 Data Objects 並執行驗證程式。

- **Consensus 共識:**
    - **定義:** 這是網路達成一致的規則與協議。由於沒有中心化的管理者，分散在世界各地的節點必須遵循同一套演算法 如工作量證明 PoW 來決定哪一條 Chain 才是真實的歷史紀錄。

---

## Storage & Access 資料儲存與取得

既然這些資料是公開的，那它們到底存在哪裡。如果你的電腦想擁有這些資料，需要做什麼前置作業。

### 哪裡存著這些資料

- **不是手機錢包:** 一般使用者的手機錢包 App 為了輕量化，通常 **不儲存** 完整的區塊與交易資料。它們只儲存你的 Keys 與 Address。當你要查詢餘額時，錢包是向網路上的全節點發送查詢請求。
- **全節點 Full Node:** 這些資料完整地存在於全球成千上萬台運行著區塊鏈客戶端軟體的電腦硬碟中。每一台全節點都擁有一份一模一樣、從創世區塊至今的完整帳本備份。

### 如何讓我的電腦擁有這些資料

如果你希望你的電腦不依賴他人，自己擁有一份完整的區塊鏈資料，你需要成為一個全節點。

- **前置作業:**
    - **硬體儲存:** 準備足夠容量的硬碟。例如比特幣區塊鏈目前大小已超過 500GB，且每天都在持續增長。
    - **軟體安裝:** 下載並安裝官方的核心客戶端軟體 例如 Bitcoin Core。
    - **同步時間:** 初始區塊下載 IBD 需要一段時間。軟體會從網路上其他節點下載過去十幾年的所有區塊，並重新驗證每一筆交易的簽章是否正確。這可能需要數天甚至數週，取決於你的網路速度與電腦效能。

---

## Node Types 節點類型

針對你的疑問，這裡有沒有所謂的半節點。其實是有的，我們在技術上將其稱為輕節點。

- **Full Node 全節點:**
    - **定義:** 下載並驗證所有區塊與交易的歷史資料。
    - **功能:** 它是網路的骨幹，負責執行最嚴格的驗證。它獨立自主，完全不需要信任任何第三方。
- **Light Node 輕節點:**
    - **定義:** 這就是你提到的類似半節點的概念。它只下載 Block Header 區塊頭，不下載具體的區塊體與交易內容。因為區塊頭很小，其資料量僅為全節點的千分之一。
    - **功能:** 因為資料不全，它無法獨立驗證所有規則，必須依賴全節點來告訴它某筆交易是否已經上鏈。這就是大多數手機錢包 SPV 的運作模式。

### 執行轉帳需要全節點嗎
**不需要**。一般使用者不需要花錢買大硬碟來跑全節點也能進行轉帳。

- **角色分工:**
    - **使用者 (輕節點):** 你的任務只是產生你的簽章。手機錢包會使用你的私鑰對交易進行簽名，然後把這則簽好名的訊息丟給網路上的全節點。
    - **全節點:** 它收到你的訊息後，會負責去檢查你的簽名對不對、餘額夠不夠。如果沒問題，它就會幫你把這筆交易廣播給全世界的礦工。
- **結論:** 成為全節點是為了 **驗證** 與 **自主**，而不是為了 **交易**。

---

## Transaction Prerequisites 轉帳前置需求

所以，如果我只是一個普通使用者，想要進行轉帳，我的電腦或手機需要具備什麼條件。

- **私鑰 Identity:**
    - 你必須擁有資金的控制權，這體現在你持有的私鑰上。這通常由錢包軟體自動生成並幫你保管。
- **餘額 Balance:**
    - 區塊鏈上必須有指向你地址的未花費交易紀錄 UTXO。白話說，就是必先有人轉錢給你，你才能轉錢給別人。
- **連線 Connection:**
    - 你的設備必須能連接網際網路，以便將簽署好的交易廣播出去。這就是為什麼手機開飛航模式時無法轉帳。
- **客戶端軟體 Client Software:**
    - 你不需要下載數百 G 的區塊鏈資料，你只需要下載一個幾十 MB 的輕量級錢包 App 如 MetaMask 或 Trust Wallet。
    - **功能:** 這些 App 負責管理你的私鑰、產生簽章、並作為你與區塊鏈網路溝通的橋樑。

### 官方的客戶端軟體

這是一個常見的誤解。由於區塊鏈是去中心化的協議，並沒有所謂的「官方」軟體，就像沒有「官方的 Email 軟體」一樣。

- **參考實作 Reference Implementation:**
    - 通常由核心開發者團隊維護的軟體被視為標準，例如比特幣的 **Bitcoin Core** 或以太坊的 **Geth**。但這些主要是給全節點運行的。
- **第三方錢包 Third-Party Wallets:**
    - 絕大多數普通用戶使用的軟體 MetaMast, Ledger, Trust Wallet 都是由第三方公司開發的。只要這些軟體遵守區塊鏈的通訊協議，它們就能正常運作。
- **選擇權:**
    - 你可以自由選擇任何你信任的錢包軟體，甚至可以自己寫程式碼來發送交易，完全不受特定單一軟體的限制。

---

## Ownership Reality 所有權本質

你說得完全正確。這是理解加密貨幣最關鍵的一點，也是它與銀行帳戶最大的差異。

- **資料在鏈上 Ledger Reality:**
    - 你的錢從來沒有存在你的手機或電腦裡。
    - 你的資產是記錄在分佈全球成千上萬個節點的公開帳本上。你的錢包只是一副眼鏡，用來看鏈上的數據。
- **私鑰即所有權 Keys Control Everything:**
    - 因為沒有銀行客服可以幫你重設密碼，**私鑰** 是你存取與移動這些資金的 **唯一** 數學工具。
    - 全網的礦工與節點只認 **數位簽章**。如果你無法使用私鑰產生正確的簽章，世界上沒有任何力量可以移動那筆錢。
- **遺失即永別 Lost Coins:**
    - 如果你弄丟了私鑰，你的資金不會消失，它們會繼續安靜地躺在區塊鏈的帳本上，大家也都看得到那裡有一筆錢。
    - 但這筆錢將 **永遠無法移動**。它們變成了數位灰塵 Digital Dust 或殭屍幣 Zombie Coins，再也無法被任何人使用。

---

## Protocol Existence 協議的存在形式

你問得很好，如果沒有官方軟體，那「規則」也就是你提到的協議到底在哪裡。

### 協議在哪裡 Where is the Protocol
它不像法律條文鎖在某個政府機關，而是以 **公開資訊** 的形式存在於兩個地方：

- **公開規範 Specifications:**
    - 類似我們網路用的 HTTP 協議，區塊鏈也有白皮書 Whitepaper 或改進提案 BIPs/EIPs。這些文件用數學與邏輯語言定義了系統該如何運作。
- **開源代碼 Source Code:**
    - 規則最終被寫死在程式碼中。例如比特幣的第一個區塊 創世區塊 的參數，以及所有的共識邏輯，都公開在 GitHub 等平台上。它是透明且不可篡改的，因為任何修改都會導致 Hash 值改變，進而被網路拒絕。
- **客戶端軟體 Client Software:**
    - 這就是你疑惑的點：**是的，客戶端軟體裡就「存著」這些邏輯與設定**。
    - 當你下載 Bitcoin Core 時，你下載的不只是連線工具，你同時下載並執行了整套「法律條文」。程式碼裡的 `if` `else` 判斷式，就是協議的具體存在形式。

### 可以自己開發客戶端嗎
**絕對可以 Can I Build My Own Client?**

- **許可性 Permissionless:**
    - 只要你寫的程式能符合上述的 **協議規範** 例如正確的序列化格式、正確的 P2P 握手訊號，你的軟體就能連上這個全球網路，與其他節點溝通。
- **實例:**
    - 這就是為什麼市面上有成千上萬種錢包 App 與礦機軟體的原因。它們外觀不同，但骨子裡都說著同一種語言 協議。
- **結論:** 區塊鏈不屬於任何一家公司開發的軟體，它是一種 **通用的語言**。

### 鏈上 vs 鏈下 Off-Chain Nature

你的理解非常精準。協議本身 **不在鏈上**，它是鏈的 **先決條件**。

- **守門員 Gatekeepers:**
    - 千萬個節點運行著這些協議規則，就像是千萬個守門員。
- **拒絕機制 Rejection:**
    - 區塊鏈上的數據，是 **通過了協議檢驗** 的結果。
    - 任何不符合協議的資料 例如錯誤的簽章、不合規的格式，會在進入鏈上之前就被節點的軟體直接 **丟棄**。它們甚至沒有機會被寫入區塊。
- **比喻:** 足球規則不在計分板上。規則決定了怎麼踢才算得分，計分板 區塊鏈 只記錄合規得分的結果。
